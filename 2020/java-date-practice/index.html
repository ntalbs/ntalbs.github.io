<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-2098194-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-2098194-3")</script><meta charset=utf-8><meta name=google-site-verification content="U8HPz3to00q8wRxuKaw82QsuVvOzGyPxcWhySSYAjOE"><meta property="og:image" content="https://ntalbs.github.io/images/ntalbs.jpg"><meta name=viewport content="width=device-width,initial-scale=1"><title>Java 날짜 연산 @ntalbs' stuff</title><link rel="shortcut icon" href=/images/favicon.ico><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/highlight.css></head><body><div id=progress><div id=bar></div><div class=container><div id=scroll-title>Java 날짜 연산</div></div></div><nav class=navbar role=navigation><div class=container><div class=navbar-header><button type=button class="navbar-toggle unselectable" data-toggle=collapse data-target=#nav-items>+</button>
<a class="navbar-brand unselectable" href=/>@ntalbs' stuff</a></div><div class="navbar-items collapsed" id=nav-items><ul><li><a class=unselectable href=/archive/>Archive</a></li><li><a class=unselectable href=/tags/>Tags</a></li><li><a class=unselectable href=/about/>About</a></li><li><a id=mode-switch class=unselectable href=#></a></li></ul></div></div></nav><header class=page-head><div class=container><p class=blog-description>내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p></div></header><main class=container role=main><article class=post><header><p class=post-meta><time datetime=2020-07-07 itemprop=datePublished>2020-07-07</time>
on
<a href=/tags/java/>Java</a></p><h1 class=post-title>Java 날짜 연산</h1></header><section class=post-content><p>Java 8에 추가된 날짜/시간 관련 클래스 중 <code>LocalDate</code>를 사용한 간단한 날짜 연산 방법을 정리한다. <code>LocalDate</code>에는 시간 정보가 포함되어 있지 않다. 날짜와 시간을 함께 다루려면 <code>LocalDateTime</code>을 사용해야 한다. UTC 오프셋이나 시간대도 함께 필요한 경우는 <code>OffsetDateTime</code> 또는 <code>ZonedDateTime</code>을 사용해야 한다.</p><h2 id=간단한-날짜-관련-연산>간단한 날짜 관련 연산</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 오늘, 어제, 내일
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>today</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>yesterday</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>minus</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>ChronoUnit</span><span class=o>.</span><span class=na>DAYS</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>tomorrow</span>  <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>plus</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>ChronoUnit</span><span class=o>.</span><span class=na>DAYS</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// day of week
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>dayOfWeek</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>getDayOfWeek</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// day of year
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>dayOfYear</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>getDayOfYear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// week of year
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>weekOfYear</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>ChronoField</span><span class=o>.</span><span class=na>ALIGNED_WEEK_OF_YEAR</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 한 주 전/후
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>oneWeekBefore</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>minusWeeks</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>oneWeekAfter</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>plusWeeks</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 한 달 전/후
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>oneMonthBefore</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>minusMonths</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>oneMonthAfter</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>plusMonths</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 두 날짜 사이의 날 수
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>d1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2020</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>d2</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2020</span><span class=o>,</span> <span class=n>6</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>vat</span> <span class=n>numDays</span> <span class=o>=</span> <span class=n>ChronoUnit</span><span class=o>.</span><span class=na>DAYS</span><span class=o>.</span><span class=na>between</span><span class=o>(</span><span class=n>d1</span><span class=o>,</span> <span class=n>d2</span><span class=o>);</span>
</span></span></code></pre></div><h2 id=한-주의-첫날-마지막-날-구하기>한 주의 첫날, 마지막 날 구하기</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 이번 주 첫 날과 마지막 날 (월요일을 한 주의 시작인 경우)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>startOfWeek</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>DayOfWeek</span><span class=o>.</span><span class=na>MONDAY</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>endOfWeek</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>DayOfWeek</span><span class=o>.</span><span class=na>SUNDAY</span><span class=o>);</span>
</span></span></code></pre></div><p>우리나라나 미국 같은 일부 나라는 일요일을 한 주의 시작으로 생각한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 이번 주 첫 날과 마지막 날 (일요일을 한 주의 시작인 경우)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>var</span> <span class=n>startOfWeek</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>WeekFields</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>Locale</span><span class=o>.</span><span class=na>KOREA</span><span class=o>).</span><span class=na>dayOfWeek</span><span class=o>(),</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>endOfWeek</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>WeekFields</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>Locale</span><span class=o>.</span><span class=na>KOREA</span><span class=o>).</span><span class=na>dayOfWeek</span><span class=o>(),</span> <span class=n>7</span><span class=o>);</span>
</span></span></code></pre></div><p>지난주, 다음주의 첫날과 마지막 날은 today에 <code>plusWeeks</code>나 <code>minusWeeks</code>로 한주 전/후 날짜를 구한 다음 위 방법을 사용하면 된다.</p><h2 id=한-달의-첫날-마지막-날-구하기>한 달의 첫날, 마지막 날 구하기</h2><p>달의 첫 날은 1일이니 구하기 쉽지만, 달의 마지막 날은 28, 29, 30, 31이 될 수 있으므로 다음과 같이 구한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>start</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>withDayOfMonth</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>end</span>   <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>TemporalAdjusters</span><span class=o>.</span><span class=na>lastDayOfMonth</span><span class=o>());</span>
</span></span></code></pre></div><p><code>YearMonth</code> 클래스를 사용하면 좀더 코드가 단순해진다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>start</span> <span class=o>=</span> <span class=n>YearMonth</span><span class=o>.</span><span class=na>now</span><span class=o>().</span><span class=na>atDay</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>end</span>   <span class=o>=</span> <span class=n>YearMonth</span><span class=o>.</span><span class=na>now</span><span class=o>().</span><span class=na>atEndOfMonth</span><span class=o>();</span>
</span></span></code></pre></div><h2 id=날짜-스트림>날짜 스트림</h2><p><code>LocalDate</code>에 있는 <code>datesUntil</code>메서드를 사용하면 두 날짜 사이의 날짜 스트림을 구할 수 있다. <code>datesUntil</code>은 현재 인스턴스의 날부터 인자로 주어진 날 까지(인자 날짜는 제외) 스트림을 리턴한다.</p><p>따라서 한 주의 모든 날짜를 구하려면 그 주의 첫 날과 그 다음 주의 첫 날을 구해 <code>datesUntil</code>을 호출하면 된다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>start</span> <span class=o>=</span> <span class=n>today</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>DayOfWeek</span><span class=o>.</span><span class=na>MONDAY</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>dates</span> <span class=o>=</span> <span class=n>start</span><span class=o>.</span><span class=na>datesUntil</span><span class=o>(</span><span class=n>start</span><span class=o>.</span><span class=na>plusWeeks</span><span class=o>(</span><span class=n>1</span><span class=o>)).</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>같은 원리로, 한 달의 모든 날짜를 구하는 것은 다음과 같이 할 수 있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>start</span> <span class=o>=</span> <span class=n>YearMonth</span><span class=o>.</span><span class=na>now</span><span class=o>().</span><span class=na>atDay</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>var</span> <span class=n>dates</span> <span class=o>=</span> <span class=n>start</span><span class=o>.</span><span class=na>datesUntil</span><span class=o>(</span><span class=n>start</span><span class=o>.</span><span class=na>plusMonths</span><span class=o>(</span><span class=n>1</span><span class=o>)).</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>스트림을 리스트로 모은 것은 예시일 뿐이다. 스트림을 필요에 맞게 사용하면 된다. 예를 들어, 2020년의 모든 일요일을 구하려면 다음과 같이 할 수 있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>sundays</span> <span class=o>=</span> <span class=n>Year</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2020</span><span class=o>).</span><span class=na>atDay</span><span class=o>(</span><span class=n>1</span><span class=o>).</span><span class=na>datesUntil</span><span class=o>(</span><span class=n>Year</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2021</span><span class=o>).</span><span class=na>atDay</span><span class=o>(</span><span class=n>1</span><span class=o>))</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>d</span> <span class=o>-&gt;</span> <span class=n>d</span><span class=o>.</span><span class=na>getDayOfWeek</span><span class=o>()</span> <span class=o>==</span> <span class=n>DayOfWeek</span><span class=o>.</span><span class=na>SUNDAY</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div></section><footer class=post-footer><div class="social button-box"><a href=https://twitter.com/share class=twitter-share-button data-show-count=false>Tweet</a>
<a class=twitter-follow-button href=https://twitter.com/ntalbs data-show-count=false>Follow @ntalbs</a>
<script async src=//platform.twitter.com/widgets.js></script></div><nav id=article-nav><a class="article-nav-link-wrap previous" href=https://ntalbs.github.io/2020/creating-lambda-using-aws-cdk/ id=article-nav-newer>CDK를 이용한 AWS Lambda 함수 생성</a>
<a class="article-nav-link-wrap next" href=https://ntalbs.github.io/2020/java-date-time-basic/ id=article-nav-older>Java 날짜/시간 API</a></nav></footer></article></main><section class=section><div class=container><aside><div id=disqus_thread></div></aside><script type=text/javascript>var disqus_shortname="ntalbs-stuff",permalink="https://ntalbs.github.io/2020/java-date-practice/".replace(/\//g,"/"),disqus_config=function(){this.page.url=permalink,this.page.identifier=permalink};(function(){var e=document,t=e.createElement("script");t.src="https://"+disqus_shortname+".disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></section><section class=section><div class="container has-text-centered"><p></p></div></section><script src=https://ntalbs.github.io/js/index.js type=text/javascript></script>
<script src=https://ntalbs.github.io/js/mode.js type=text/javascript></script><footer class=page-bottom><div class=inner><section class=copyright>© 2008-2022 <a href=/about>ntalbs</a></section><section class=poweredby>Powered by <a class=icon-ghost href=https://gohugo.io>Hugo</a></section></div></footer></body></html>