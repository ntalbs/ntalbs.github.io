<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-2098194-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-2098194-3');</script><meta charset="utf-8"><meta name="google-site-verification" content="U8HPz3to00q8wRxuKaw82QsuVvOzGyPxcWhySSYAjOE"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Emacs: 다이어그램 그리기 @ntalbs' stuff</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><style type="text/css">
                            .mjpage .MJX-monospace {
                            font-family: monospace
                            }

                            .mjpage .MJX-sans-serif {
                            font-family: sans-serif
                            }

                            .mjpage {
                            display: inline;
                            font-style: normal;
                            font-weight: normal;
                            line-height: normal;
                            font-size: 100%;
                            font-size-adjust: none;
                            text-indent: 0;
                            text-align: left;
                            text-transform: none;
                            letter-spacing: normal;
                            word-spacing: normal;
                            word-wrap: normal;
                            white-space: nowrap;
                            float: none;
                            direction: ltr;
                            max-width: none;
                            max-height: none;
                            min-width: 0;
                            min-height: 0;
                            border: 0;
                            padding: 0;
                            margin: 0
                            }

                            .mjpage * {
                            transition: none;
                            -webkit-transition: none;
                            -moz-transition: none;
                            -ms-transition: none;
                            -o-transition: none
                            }

                            .mjx-svg-href {
                            fill: blue;
                            stroke: blue
                            }

                            .MathJax_SVG_LineBox {
                            display: table!important
                            }

                            .MathJax_SVG_LineBox span {
                            display: table-cell!important;
                            width: 10000em!important;
                            min-width: 0;
                            max-width: none;
                            padding: 0;
                            border: 0;
                            margin: 0
                            }

                            .mjpage__block {
                            text-align: center;
                            margin: 1em 0em;
                            position: relative;
                            display: block!important;
                            text-indent: 0;
                            max-width: none;
                            max-height: none;
                            min-width: 0;
                            min-height: 0;
                            width: 100%
                            }</style></head><body><div id="progress"><div id="bar"></div><div class="container"><div id="scroll-title">Emacs: 다이어그램 그리기</div></div></div><nav class="navbar" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle unselectable" data-toggle="collapse" data-target="#nav-items">+</button>
<a class="navbar-brand unselectable" href="/">@ntalbs' stuff</a></div><div class="navbar-items collapsed" id="nav-items"><ul><li><a class="unselectable" href="/archive/">Archive</a></li><li><a class="unselectable" href="/tags/">Tags</a></li><li><a class="unselectable" href="/about/">About</a></li></ul></div></div></nav><header class="page-head"><div class="container"><p class="blog-description">내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p></div></header><main class="container" role="main"><article class="post"><header><p class="post-meta"><time datetime="2019-02-08" itemprop="datePublished">2019-02-08</time>
on
<a href="/tags/emacs/">Emacs</a></p><h1 class="post-title">Emacs: 다이어그램 그리기</h1></header><section class="post-content"><p>가끔씩 다이어그램을 그려야 할 때면 파워포인트를 이용했다. 파워포인트로 다이어그램을 그린 다음 스크린 캡쳐 이미지를 사용하는 식이다. 이 방법에는 심각한 단점이 하나 있다. 다이어그램을 수정하기가 매우 귀찮다는 점이다.</p><p>파워포인트 파일을 찾아 다이어그램을 수정하고 다시 스크린 캡쳐해 이미지를 만들어야 한다. 다이어그램 중간에 새로운 요소가 추가하는 경우는 수정 작업이 더욱 짜증난다. 파워포인트 파일을 찾지 못하면 다이어그램을 다시 그려야 한다.</p><p>UML 다이어그램을 그릴 때 파워포인트는 좋은 도구가 아니다. 작업도 고통스러운 일이고, 수정도 번거롭다. <a href="http://plantuml.com/">PlantUml</a>이나 <a href="https://graphviz.gitlab.io/">Graphviz</a>를 쓰면 텍스트 언어를 사용해 다양한 다이어그램을 쉽게 그릴 수 있다.</p><h2 id="plantuml">PlantUml</h2><p>PlantUml을 쓰면 텍스트 언어로 UML 다이어그램을 생성할 수 있다. Mac에서는 Homebrew로 설치하면 된다.</p><pre><code class="hljs">$ <span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>plantuml
</code></pre><p>Emacs에서는 PlantUml을 사용하기 편하게 해주는 <a href="https://github.com/skuro/plantuml-mode">plantuml-mode</a>를 설치하면 다이어그램을 작성하고 쉽게 미리보기 할 수 있다. 패키지를 설치한 후 plantuml 바이너리 위치를 지정해야 한다.</p><pre><code class="hljs">M-<span class="hljs-keyword">x</span> customize-<span class="hljs-keyword">mode</span> <span class="hljs-symbol">&lt;RET&gt;</span>
plantuml-<span class="hljs-keyword">mode</span> <span class="hljs-symbol">&lt;RET&gt;</span>
</code></pre><p>모드 설정 화면에서 <code>Plantuml Jar Path</code>나 <code>Plantuml Java Command</code>를 설정하면 된다. brew로 설치했다면 <code>Plantuml Java Command</code>에 <code>/usr/local/bin/plantuml</code>를 지정하면 된다.</p><p></p><figure><img src="/2019/02-08-diagram-in-emacs/plantuml-emacs.png" alt=""></figure><p></p><p>PlantUml 언어 문법은 상당히 직관적이다. 클래스 다이어그램, 시퀀스 다이어그램 등의 UML 다이어그램을 쉽게 그릴 수 있다. 자세한 사항은 PlantUml 웹사이트를 참조하기 바란다.</p><p>중간에 새로운 요소를 추가해야 할 경우 다른 다이어그램 요소를 일일히 손으로 이동할 필요 없이 코드를 고친 다음 다이어그램을 다시 생성하면 된다. PNG, SVG뿐 아니라 <span class="mjpage"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.947ex" height="2.676ex" style="vertical-align: -0.838ex;" viewBox="0 -791.3 2560.7 1152.1" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title">
<title id="MathJax-SVG-1-Title">\rm\LaTeX</title>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
 <use xlink:href="#MJMAIN-4C" x="0" y="0"></use>
<g transform="translate(300,0)">
 <use transform="scale(0.707)" xlink:href="#MJMAIN-41" x="0" y="296"></use>
</g>
 <use xlink:href="#MJMAIN-54" x="661" y="0"></use>
<g transform="translate(1243,0)">
 <use xlink:href="#MJMAIN-45" x="0" y="-216"></use>
</g>
 <use xlink:href="#MJMAIN-58" x="1810" y="0"></use>
</g>
</svg></span> 형식으로 출력이 가능하다.</p><h2 id="graphviz">Graphviz</h2><p>UML이 아닌 일반 다이어그램을 그리고 싶을 때는 <a href="https://graphviz.gitlab.io/">Graphviz</a>를 활용할 수 있다. Homebrew로 plantuml을 설치했다면 graphviz도 함께 설치되어 있을 것이다. Graphviz만 따로 설치하고 싶은 경우도 역시 Homebrew를 사용할 수 있다.</p><p>Emacs에서는 <a href="https://github.com/ppareit/graphviz-dot-mode">graphviz-dot-mode</a>를 활용할 수 있다. Graphviz에는 <code>dot</code>뿐 아니라 <code>neato</code>, <code>fdp</code>, <code>sfdp</code>, <code>twopi</code>, <code>circo</code> 명령이 있지만, graphviz-dot-mode는 모드 이름이 암시하듯 <code>dot</code>만 지원한다. <code>dot</code>이 아닌 다른 명령을 사용하려면 콘솔에서 직접 명령을 실행해야 한다.</p><p></p><figure><img src="/2019/02-08-diagram-in-emacs/g.png" alt=""></figure><p></p><p>Graphviz를 이용하면 위와 같은 복잡한 다이어그램도 아래와 같은 간단한 코드로 생성할 수 있다.</p><pre><code class="hljs"><span class="hljs-keyword">digraph </span>G {
  rankdir = LR
  node [<span class="hljs-keyword">shape </span>= Mrecord]
  Start -&gt; {<span class="hljs-built_in">A1</span>,<span class="hljs-built_in">A2</span>,<span class="hljs-built_in">A3</span>,<span class="hljs-built_in">A4</span>,<span class="hljs-built_in">A5</span>}
  {<span class="hljs-built_in">A1</span>,<span class="hljs-built_in">A2</span>,<span class="hljs-built_in">A3</span>} -&gt; <span class="hljs-keyword">B1
</span>  {<span class="hljs-built_in">A2</span>,<span class="hljs-built_in">A3</span>,<span class="hljs-built_in">A4</span>} -&gt; <span class="hljs-keyword">B2
</span>  {<span class="hljs-built_in">A3</span>,<span class="hljs-built_in">A4</span>,<span class="hljs-built_in">A5</span>} -&gt; <span class="hljs-keyword">B3
</span>  {<span class="hljs-keyword">B1,B2,B3} </span>-&gt; End
}
</code></pre><h2 id="참고">참고</h2><ul><li><a href="https://graphviz.gitlab.io/">Graphviz - Graph Visualization Software</a></li><li><a href="http://www.tonyballantyne.com/graphs.html">Drawing Graphs using Dot and Graphviz</a></li><li><a href="https://emacs.stackexchange.com/questions/595/best-ways-of-generating-uml-from-within-emacs">Best ways of generating UML from within Emacs</a></li></ul></section><footer class="post-footer"><div class="social button-box"><a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a>
<a class="twitter-follow-button" href="https://twitter.com/ntalbs" data-show-count="false">Follow @ntalbs</a>
<script async="" src="//platform.twitter.com/widgets.js"></script></div><nav id="article-nav"><a class="article-nav-link-wrap previous" href="https://ntalbs.github.io/2019/emacs-number-series/" id="article-nav-newer">Emacs: 숫자 범위 포함 텍스트 생성</a>
<a class="article-nav-link-wrap next" href="https://ntalbs.github.io/2019/project-euler-retro/" id="article-nav-older">프로젝트 오일러 회고</a></nav></footer></article></main><section class="section"><div class="container"><aside><div id="disqus_thread"></div></aside><script type="text/javascript">var disqus_shortname='ntalbs-stuff';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></section><section class="section"><div class="container has-text-centered"><p></p></div></section><script src="https://ntalbs.github.io/js/index.js" type="text/javascript"></script><link rel="stylesheet" href="/css/googlecode.css"><footer class="page-bottom"><div class="inner"><section class="copyright">© 2008-2019 <a href="/about">ntalbs</a></section><section class="poweredby">Powered by <a class="icon-ghost" href="https://gohugo.io">Hugo</a></section></div></footer>
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs id="MathJax_SVG_glyphs"><path stroke-width="1" id="MJMAIN-4C" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q48 680 182 680Q324 680 348 683H360V637H333Q273 637 258 635T233 622L232 342V129Q232 57 237 52Q243 47 313 47Q384 47 410 53Q470 70 498 110T536 221Q536 226 537 238T540 261T542 272T562 273H582V268Q580 265 568 137T554 5V0H25V46H58Q100 47 109 49T128 61V622Z"></path><path stroke-width="1" id="MJMAIN-41" d="M255 0Q240 3 140 3Q48 3 39 0H32V46H47Q119 49 139 88Q140 91 192 245T295 553T348 708Q351 716 366 716H376Q396 715 400 709Q402 707 508 390L617 67Q624 54 636 51T687 46H717V0H708Q699 3 581 3Q458 3 437 0H427V46H440Q510 46 510 64Q510 66 486 138L462 209H229L209 150Q189 91 189 85Q189 72 209 59T259 46H264V0H255ZM447 255L345 557L244 256Q244 255 345 255H447Z"></path><path stroke-width="1" id="MJMAIN-54" d="M36 443Q37 448 46 558T55 671V677H666V671Q667 666 676 556T685 443V437H645V443Q645 445 642 478T631 544T610 593Q593 614 555 625Q534 630 478 630H451H443Q417 630 414 618Q413 616 413 339V63Q420 53 439 50T528 46H558V0H545L361 3Q186 1 177 0H164V46H194Q264 46 283 49T309 63V339V550Q309 620 304 625T271 630H244H224Q154 630 119 601Q101 585 93 554T81 486T76 443V437H36V443Z"></path><path stroke-width="1" id="MJMAIN-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path><path stroke-width="1" id="MJMAIN-58" d="M270 0Q252 3 141 3Q46 3 31 0H23V46H40Q129 50 161 88Q165 94 244 216T324 339Q324 341 235 480T143 622Q133 631 119 634T57 637H37V683H46Q64 680 172 680Q297 680 318 683H329V637H324Q307 637 286 632T263 621Q263 618 322 525T384 431Q385 431 437 511T489 593Q490 595 490 599Q490 611 477 622T436 637H428V683H437Q455 680 566 680Q661 680 676 683H684V637H667Q585 634 551 599Q548 596 478 491Q412 388 412 387Q412 385 514 225T620 62Q628 53 642 50T695 46H726V0H717Q699 3 591 3Q466 3 445 0H434V46H440Q454 46 476 51T499 64Q499 67 463 124T390 238L353 295L350 292Q348 290 343 283T331 265T312 236T286 195Q219 88 218 84Q218 70 234 59T272 46H280V0H270Z"></path></defs></svg></body></html>