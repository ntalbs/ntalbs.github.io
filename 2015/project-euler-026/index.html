<!DOCTYPE html><html><head><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3882204692252974" crossorigin="anonymous"></script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-2098194-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-2098194-3")</script><meta charset="utf-8"><meta name="google-site-verification" content="U8HPz3to00q8wRxuKaw82QsuVvOzGyPxcWhySSYAjOE"><meta name="description" content="
1000 이하의 $d$ 중에서 $1/d$ 이 가장 긴 순환마디를 갖는 수는?
문제 자세히 보기: [국어] [영어]

$1 \over d$의 순환마디를 구하려면 어떻게 해야 할까? 이 문제를 풀려면 초등학교때 배웠던 나눗셈 절차를 잘 분석하고 이를 수행하는 프로그램을 만들어야 한다. 예를 들어 $\frac{1}{54}$를 구하는 과정을 자세히 살펴보자."><meta name="og:title" content="프로젝트 오일러 26 @ntalbs' stuff"><meta name="og:description" content="
1000 이하의 $d$ 중에서 $1/d$ 이 가장 긴 순환마디를 갖는 수는?
문제 자세히 보기: [국어] [영어]

$1 \over d$의 순환마디를 구하려면 어떻게 해야 할까? 이 문제를 풀려면 초등학교때 배웠던 나눗셈 절차를 잘 분석하고 이를 수행하는 프로그램을 만들어야 한다. 예를 들어 $\frac{1}{54}$를 구하는 과정을 자세히 살펴보자."><meta name="og:url" content="https://ntalbs.github.io/2015/project-euler-026/"><meta name="og:image" content="https://ntalbs.github.io/images/ntalbs.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@ntalbs"><meta name="twitter:creater" content="@ntalbs"><meta name="viewport" content="width=device-width,initial-scale=1"><title>프로젝트 오일러 26 @ntalbs' stuff</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/highlight.css"><style type="text/css">
                            .mjpage .MJX-monospace {
                            font-family: monospace
                            }

                            .mjpage .MJX-sans-serif {
                            font-family: sans-serif
                            }

                            .mjpage {
                            display: inline;
                            font-style: normal;
                            font-weight: normal;
                            line-height: normal;
                            font-size: 100%;
                            font-size-adjust: none;
                            text-indent: 0;
                            text-align: left;
                            text-transform: none;
                            letter-spacing: normal;
                            word-spacing: normal;
                            word-wrap: normal;
                            white-space: nowrap;
                            float: none;
                            direction: ltr;
                            max-width: none;
                            max-height: none;
                            min-width: 0;
                            min-height: 0;
                            border: 0;
                            padding: 0;
                            margin: 0
                            }

                            .mjpage * {
                            transition: none;
                            -webkit-transition: none;
                            -moz-transition: none;
                            -ms-transition: none;
                            -o-transition: none
                            }

                            .mjx-svg-href {
                            fill: blue;
                            stroke: blue
                            }

                            .MathJax_SVG_LineBox {
                            display: table!important
                            }

                            .MathJax_SVG_LineBox span {
                            display: table-cell!important;
                            width: 10000em!important;
                            min-width: 0;
                            max-width: none;
                            padding: 0;
                            border: 0;
                            margin: 0
                            }

                            .mjpage__block {
                            text-align: center;
                            margin: 1em 0em;
                            position: relative;
                            display: block!important;
                            text-indent: 0;
                            max-width: none;
                            max-height: none;
                            min-width: 0;
                            min-height: 0;
                            width: 100%
                            }</style></head><body><div id="progress"><div id="bar"></div><div class="container"><div id="scroll-title">프로젝트 오일러 26</div></div></div><nav class="navbar" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle unselectable" data-toggle="collapse" data-target="#nav-items">+</button>
<a class="navbar-brand unselectable" href="/">@ntalbs' stuff</a></div><div class="navbar-items collapsed" id="nav-items"><ul><li><a class="unselectable" href="/archive/">Archive</a></li><li><a class="unselectable" href="/tags/">Tags</a></li><li><a class="unselectable" href="/about/">About</a></li><li><a id="mode-switch" class="unselectable" href="#"></a></li></ul></div></div></nav><header class="page-head"><div class="container"><p class="blog-description">내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p></div></header><main class="container" role="main"><article class="post with-math"><header><p class="post-meta"><time datetime="2015-08-25" itemprop="datePublished">2015-08-25</time>
on
<a href="/tags/project-euler/">Project-Euler</a>
<a href="/tags/clojure/">Clojure</a></p><h1 class="post-title">프로젝트 오일러 26</h1></header><section class="post-content"><blockquote><p>1000 이하의 <span class="mjpage"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.216ex" height="2.176ex" style="vertical-align: -0.338ex;" viewBox="0 -791.3 523.5 936.9" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title">
<title id="MathJax-SVG-1-Title">d</title>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
 <use xlink:href="#MJMATHI-64" x="0" y="0"></use>
</g>
</svg></span> 중에서 <span class="mjpage"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.541ex" height="2.843ex" style="vertical-align: -0.838ex;" viewBox="0 -863.1 1524.5 1223.9" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-2-Title">
<title id="MathJax-SVG-2-Title">1/d</title>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
 <use xlink:href="#MJMAIN-31" x="0" y="0"></use>
 <use xlink:href="#MJMAIN-2F" x="500" y="0"></use>
 <use xlink:href="#MJMATHI-64" x="1001" y="0"></use>
</g>
</svg></span> 이 가장 긴 순환마디를 갖는 수는?</p><p>문제 자세히 보기: <a href="http://euler.synap.co.kr/prob_detail.php?id=26">[국어]</a> <a href="https://projecteuler.net/problem=26">[영어]</a></p></blockquote><p><span class="mjpage"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.696ex" height="3.676ex" style="vertical-align: -1.338ex;" viewBox="0 -1006.6 730.2 1582.7" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-3-Title">
<title id="MathJax-SVG-3-Title">1 \over d</title>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
<g transform="translate(120,0)">
<rect stroke="none" width="490" height="60" x="0" y="220"></rect>
 <use transform="scale(0.707)" xlink:href="#MJMAIN-31" x="96" y="629"></use>
 <use transform="scale(0.707)" xlink:href="#MJMATHI-64" x="84" y="-617"></use>
</g>
</g>
</svg></span>의 순환마디를 구하려면 어떻게 해야 할까? 이 문제를 풀려면 초등학교때 배웠던 나눗셈 절차를 잘 분석하고 이를 수행하는 프로그램을 만들어야 한다. 예를 들어 <span class="mjpage"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.48ex" height="3.676ex" style="vertical-align: -1.338ex;" viewBox="0 -1006.6 1067.8 1582.7" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-4-Title">
<title id="MathJax-SVG-4-Title">\frac{1}{54}</title>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
<g transform="translate(120,0)">
<rect stroke="none" width="827" height="60" x="0" y="220"></rect>
 <use transform="scale(0.707)" xlink:href="#MJMAIN-31" x="335" y="629"></use>
<g transform="translate(60,-424)">
 <use transform="scale(0.707)" xlink:href="#MJMAIN-35"></use>
 <use transform="scale(0.707)" xlink:href="#MJMAIN-34" x="500" y="0"></use>
</g>
</g>
</g>
</svg></span>를 구하는 과정을 자세히 살펴보자.</p><img src="/2015/08-25-project-euler-026/division.png" class="invert-safe"><ol><li>1은 54로 나누어지지 않으므로 몫에 <code>0.</code>을 쓰고 피젯수 뒤에 0을 붙여준다.</li><li><strong>피젯수가 10이 되었지만</strong> 여전히 54보다 작아 54로 나누어지지 않는다. 몫에 0을 덧붙여 쓰고 피젯수 뒤에도 0을 붙여준다. 이제 피젯수가 100이 되었다. 100을 54로 나누면 몫은 1, 나머지는 46이 된다.</li><li>46뒤에 0을 붙여 460으로 만든 다음 54로 나눈다. 몫은 8이고 나머지는 28이다.</li><li>28뒤에 0을 붙여 280으로 만든 다음 54로 나누면 몫은 5고 <strong>나머지는 10이다.</strong></li></ol><p>10은 앞에서 봤던 숫자다. 피젯수가 앞에서 나왔던 숫자이므로 과정 2~4가 반복될 것이다. 따라서 순환마디는 185가 됨을 알 수 있다. 이 로직을 그대로 Clojure 함수로 옮기면 다음과 같이 된다. 피젯수가 반복되는지 확인하기 위해 <code>set</code>을 사용했다.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-clojure" data-lang="clojure"><span class="line"><span class="cl"><span class="p">(</span><span class="kd">defn </span><span class="nv">qs</span> <span class="p">[</span><span class="nv">n</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">loop </span><span class="p">[</span><span class="nv">r</span> <span class="mi">10</span> <span class="nv">r-acc</span> <span class="o">#</span><span class="p">{}</span> <span class="nv">q-acc</span> <span class="p">[]]</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">cond </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">r</span><span class="p">)</span> <span class="p">[</span><span class="nv">n</span> <span class="nv">q-acc</span> <span class="mi">0</span><span class="p">]</span>                       <span class="c1">; no recurring cycle</span>
</span></span><span class="line"><span class="cl">          <span class="p">(</span><span class="nb">contains? </span><span class="nv">r-acc</span> <span class="nv">r</span><span class="p">)</span> <span class="p">[</span><span class="nv">n</span> <span class="nv">q-acc</span> <span class="p">(</span><span class="nb">count </span><span class="nv">q-acc</span><span class="p">)]</span> <span class="c1">; recurring</span>
</span></span><span class="line"><span class="cl">          <span class="ss">:else</span> <span class="p">(</span><span class="nf">recur</span> <span class="p">(</span><span class="nb">* </span><span class="mi">10</span> <span class="p">(</span><span class="nb">rem </span><span class="nv">r</span> <span class="nv">n</span><span class="p">))</span> <span class="p">(</span><span class="nb">conj </span><span class="nv">r-acc</span> <span class="nv">r</span><span class="p">)</span> <span class="p">(</span><span class="nb">conj </span><span class="nv">q-acc</span> <span class="p">(</span><span class="nb">quot </span><span class="nv">r</span> <span class="nv">n</span><span class="p">))))))</span>
</span></span></code></pre></div><p>위 함수에 인자로 <code>n</code>을 주면 <code>[n dgts cnt]</code> 형태의 벡터를 리턴한다. <code>n</code>은 인자로 받은 <code>n</code>과 같은 값이고, <code>dgts</code>는 소수점 이하 숫자의 벡터이며 <code>cnt</code>는 <code>dgts</code>의 길이다. 엄밀하게 말하자면 <code>cnt</code>는 순환마디의 길이가 아니라 소수점 이하 자릿수지만, 이 문제의 답을 구하는 데는 문제가 없었다.</p><p>이 함수를 이용하면 쉽게 문제를 풀 수 있다. 1부터 1000까지 숫자를 증가시키면서 <code>qs</code>로 각 숫자에 대한 순환마디 길이를 구한 다음 그 중 가장 긴 순환마디를 갖는 수를 찾으면 된다.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-clojure" data-lang="clojure"><span class="line"><span class="cl"><span class="p">(</span><span class="kd">defn </span><span class="nv">solve</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nb">range </span><span class="mi">1</span> <span class="p">(</span><span class="nb">inc </span><span class="mi">1000</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">map </span><span class="nv">qs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="p">(</span><span class="nb">apply max-key </span><span class="p">(</span><span class="k">fn </span><span class="p">[[</span><span class="nv">_</span> <span class="nv">_</span> <span class="nv">cnt</span><span class="p">]]</span> <span class="nv">cnt</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">       <span class="nv">first</span><span class="p">))</span>
</span></span></code></pre></div><p>실행 결과는 다음과 같다.</p><pre class="console">p026=&gt; (time (solve))
"Elapsed time: 42.317907 msecs"
9?3
</pre><h2 id="참고">참고</h2><ul><li><a href="https://github.com/ntalbs/euler-clj/blob/mainline/src/p026.clj">프로젝트 오일러 26 풀이 소스 코드</a></li></ul></section><footer class="post-footer"><div class="social button-box"><a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a>
<a class="twitter-follow-button" href="https://twitter.com/ntalbs" data-show-count="false">Follow @ntalbs</a>
<script async="" src="//platform.twitter.com/widgets.js"></script></div><nav id="article-nav"><a class="article-nav-link-wrap previous" href="/2015/project-euler-027/" id="article-nav-newer">프로젝트 오일러 27</a>
<a class="article-nav-link-wrap next" href="/2015/if-true-return-true/" id="article-nav-older">if (cond == true) return true</a></nav></footer></article></main><section class="section"><div class="container"><aside><div id="disqus_thread"></div></aside><script type="text/javascript">var disqus_shortname="ntalbs-stuff",permalink="https://ntalbs.github.io/2015/project-euler-026/".replace(/\//g,"/"),disqus_config=function(){this.page.url=permalink,this.page.identifier=permalink};(function(){var e=document,t=e.createElement("script");t.src="https://"+disqus_shortname+".disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></section><section class="section"><div class="container has-text-centered"><p></p></div></section><script src="https://ntalbs.github.io/js/index.js" type="text/javascript"></script>
<script src="https://ntalbs.github.io/js/mode.js" type="text/javascript"></script><footer class="page-bottom"><div class="inner"><section class="copyright">© 2008-2022 <a href="/about">ntalbs</a></section><section class="poweredby">Powered by <a class="icon-ghost" href="https://gohugo.io">Hugo</a></section></div></footer><svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs id="MathJax_SVG_glyphs"><path stroke-width="1" id="MJMATHI-64" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path stroke-width="1" id="MJMAIN-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path stroke-width="1" id="MJMAIN-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path stroke-width="1" id="MJMAIN-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path stroke-width="1" id="MJMAIN-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs></svg></body></html>