<!doctype html><html><head><script src=/js/mode.js type=text/javascript></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3882204692252974" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2098194-3"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-2098194-3")</script><meta name=google-site-verification content="U8HPz3to00q8wRxuKaw82QsuVvOzGyPxcWhySSYAjOE"><meta charset=utf-8><meta http-equiv=content-language content="ko-KR"><meta name=description content="Emacs: 행 연결"><meta name=keywords content="Emacs"><meta property="og:title" content="Emacs: 행 연결 @ntalbs' stuff"><meta property="og:site_name" content="@ntalbs' stuff"><meta property="og:url" content="https://ntalbs.github.io/2015/emacs-joining-lines/"><meta property="og:description" content="Emacs: 행 연결"><meta name=og:image content="https://ntalbs.github.io/images/ntalbs.jpg"><meta name=twitter:card content="summary"><meta name=twitter:site content="@ntalbs"><meta name=twitter:creator content="@ntalbs"><meta name=viewport content="width=device-width,initial-scale=1"><title>Emacs: 행 연결 @ntalbs' stuff</title><link rel="shortcut icon" href=/images/favicon.ico><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/highlight.css></head><body><div id=progress><div id=bar></div><div class=container><div id=scroll-title>Emacs: 행 연결</div></div></div><nav class=navbar role=navigation><div class=container><div class=navbar-header><button type=button class="navbar-toggle unselectable" data-toggle=collapse data-target=#nav-items>+</button>
<a class="navbar-brand unselectable" href=/>@ntalbs' stuff</a></div><div class="navbar-items collapsed" id=nav-items><ul><li><input id=search type=search placeholder="Search this site" autocomplete=off></li><li><a class=unselectable href=/archive/>Archive</a></li><li><a class=unselectable href=/tags/>Tags</a></li><li><a class=unselectable href=/about/>About</a></li><li><a id=mode-switch class=unselectable href=#></a></li></ul></div></div></nav><header class=page-head><div class=container><p class=blog-description>내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p></div></header><main class=container role=main><article class=post><header><p class=post-meta><time datetime=2015-01-26 itemprop=datePublished>2015-01-26</time>
on
<a href=/tags/emacs/>Emacs</a></p><h1 class=post-title>Emacs: 행 연결</h1></header><section class=post-content><p>코드를 편집하다 보면 여러 줄을 한 줄로 합치고 싶을 때가 종종 생긴다. 예를 들어 다음과 같은 코드가 있다고 하자.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>func</span><span class=p>(</span><span class=nx>arg1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=nx>arg2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=nx>arg3</span><span class=p>);</span>
</span></span></code></pre></div><p>이걸 다음과 같이 바꾸고 싶다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>func</span><span class=p>(</span><span class=nx>arg1</span><span class=p>,</span> <span class=nx>arg2</span><span class=p>,</span> <span class=nx>arg3</span><span class=p>);</span>
</span></span></code></pre></div><p>Vim에서는 이 작업이 아주 쉽다. 첫 줄 아무 곳이나 커서를 위치시키고 명령 모드에서 <code>J</code>를 연달아 누르면 된다. Visual-mode로 세 줄을 선택한 다음 <code>J</code>를 누르면 선택한 행을 한 줄로 합쳐준다.</p><p>Emacs에서도 작업이 불가능한 것은 아니지만, 기본으로 제공되는 기능은 덜 직관적이고 조금 불편하다. Vim에서와 달리 Emacs에서는 합치려는 코드 블록의 마지막 줄로 커서를 이동한 다음 <code>M-^</code>(<code>delete-indentation</code>)를 눌러야 한다. 여러 줄을 선택해 <code>M-^</code>를 누른 경우 선택 영역의 행을 한 행으로 합쳐주지 않는다. Vim에서 <code>J</code>는 다음 행을 현재 행과 연결하지만, Emacs의 <code>M-^</code>은 현재 행을 이전 행에 연결한다. 현재 행을 다음 행과 합치려면 <code>C-u M-^</code>로 가능하지만, 이걸 반복해서 누르기는 쉽지 않다.</p><p>행을 합치는 작업이 아주 빈번한 것도 아니고, 행 합치기 기능이 없더라도 약간의 반복 작업으로 행을 합칠 수 있기 때문에 불편함을 감수했다. 보통은 다음과 같은 식으로 작업했다.</p><ul><li>현재 행을 다음 행과 합칠 때: 현재 행 맨 뒤로 커서 이동 후 <code>C-k</code>(<code>kill-visual-line</code>), <code>M-SPC</code>(<code>just-one-space</code>)를 이용한다.</li><li>현재 행을 이전 행과 합칠 때: Mac OS X에서는 일반 에디터에서 <code>Cmd-delete</code>를 누르면 현재 커서 위치부터 행의 맨 앞까지 삭제한다. 동일한 기능을 Emacs에서도 구현해 <code>s-backspace</code>에 바인딩해 두었다. 따라서 <code>s-backspace</code>, <code>backspace</code>로 현재 행을 이전 행과 합칠 수 있다. 또는 <code>C-a</code>, <code>backspace</code>, <code>M-SPC</code>를 이용할 수도 있다.</li></ul><p>그러나 <a href=http://emacsredux.com/blog/2013/05/30/joining-lines/>Joining Lines</a>에 더 좋은 방법이 정리되어 있다. 현재 행을 다음 행과 합치는 기능을 구현해 놓았는데, 댓글 중에 선택 영역의 행을 합쳐주는 기능의 코드가 보였다. 이 둘을 통합해 다음과 같이 코드를 작성했다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-clojure data-lang=clojure><span class=line><span class=cl><span class=p>(</span><span class=nf>defun</span> <span class=nv>join-lines-in-region</span> <span class=p>(</span><span class=nf>beg</span> <span class=nv>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Apply join-line over region.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>interactive</span> <span class=s>&#34;r&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=k>if </span><span class=nv>mark-active</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=k>let </span><span class=p>((</span><span class=nf>beg</span> <span class=p>(</span><span class=nf>region-beginning</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=nf>end</span> <span class=p>(</span><span class=nf>copy-marker</span> <span class=p>(</span><span class=nf>region-end</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nf>goto-char</span> <span class=nv>beg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nf>while</span> <span class=p>(</span><span class=nb>&lt; </span><span class=p>(</span><span class=nf>point</span><span class=p>)</span> <span class=nv>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=nf>join-line</span> <span class=mi>1</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>delete-indentation</span> <span class=mi>1</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>global-set-key</span> <span class=p>(</span><span class=nf>kbd</span> <span class=s>&#34;C-^&#34;</span><span class=p>)</span> <span class=ss>&#39;join-lines-in-region</span><span class=p>)</span>
</span></span></code></pre></div><p>선택 영역이 있는 경우에는 선택 영역에 포함된 모든 행을 하나로 합치고, 선택 영역이 없는 경우에는 현재 행과 다음 행을 하나로 합친다. 이 코드를 <code>.emacs</code>에 포함시키면 <code>C-^</code>로 편리하게 행을 합칠 수 있다.</p><h2 id=참고>참고</h2><ul><li><a href=http://emacsredux.com/blog/2013/05/30/joining-lines/>Joining Lines</a>
Emacs에서 행을 합치는 방법에 대해 자세히 정리되어 있다. 댓글 중에 선택 영역의 행을 합쳐주는 eLisp 코드도 있다.</li></ul></section><footer class=post-footer><div class="social button-box"><a href=https://twitter.com/share class=twitter-share-button data-show-count=false>Tweet</a>
<a class=twitter-follow-button href=https://twitter.com/ntalbs data-show-count=false>Follow @ntalbs</a>
<script async src=//platform.twitter.com/widgets.js></script></div><nav id=article-nav><a class="article-nav-link-wrap previous" href=/2015/java-repl/ id=article-nav-newer>Java REPL</a>
<a class="article-nav-link-wrap next" href=/2015/emacs-mimic-sublime-text-demo/ id=article-nav-older>Emacs: Sublime Text 데모 편집 흉내</a></nav></footer></article></main><section class=section><div class=container><aside><div id=disqus_thread></div></aside><script type=text/javascript>var disqus_shortname="ntalbs-stuff",permalink="https://ntalbs.github.io/2015/emacs-joining-lines/".replace(/\//g,"/"),disqus_config=function(){this.page.url=permalink,this.page.identifier=permalink};(function(){var e=document,t=e.createElement("script");t.src="https://"+disqus_shortname+".disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></section><section class=section><div class="container has-text-centered"><p></p></div></section><script src=/js/index.js type=text/javascript></script><footer class=page-bottom><div class=inner><section class=copyright>© 2008-2023 <a href=/about>ntalbs</a></section><section class=poweredby>Powered by <a class=icon-ghost href=https://gohugo.io>Hugo</a></section></div></footer></body></html>