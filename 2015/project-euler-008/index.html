<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>프로젝트 오일러 8 @ntalbs&#39; stuff</title>
<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/style.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">


  </head>
  <body>
    <div id="progress">
  <div id="bar"></div>
  <div class="container">
    <div id="scroll-title">프로젝트 오일러 8</div>
  </div>
</div>

    <nav class="navbar" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-items">+</button>
      <a class="navbar-brand" href="/">@ntalbs&#39; stuff</a>
    </div>
    <div class="navbar-items collapsed" id="nav-items">
      <ul>
        
        <li><a href="/archive/">Archive</a></li>
        
        <li><a href="/tags/">Tags</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </div>
  </div>
</nav>

<header class="page-head">
  <div class="container">
    <p class="blog-description">내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p>
  </div>
</header>

    <main class="container" role="main">
      <article class="post">
        <header>
          <p class="post-meta">
            <time datetime="2015-02-25" itemprop="datePublished">2015-02-25</time>
            on
            
            <a href="/tags/project-euler/">Project-Euler</a>
            
            <a href="/tags/clojure/">Clojure</a>
            
          </p>
          <h1 class="post-title">
            프로젝트 오일러 8
          </h1>
        </header>
        <section class="post-content">
          <blockquote>
<p>1000자리 숫자 안에서 이어지는 5자리 숫자의 곱 중 최대값은?</p>

<p>문제 자세히 보기: <a href="http://euler.synap.co.kr/prob_detail.php?id=8">[국어]</a></p>
</blockquote>

<p>1,000자리 숫자라고 하지만 1,000개의 숫자 리스트로 보는 편이 문제를 풀기에 더 좋을 것 같다. Clojure에서는 문자열도 시퀀스로 다룰 수 있으므로 <code>bigint</code>를 쓰기 보다는 문자열로 만들어 작업하는 게 더 편하다.</p>

<pre><code class="language-clojure">(def s
  (str &quot;73167176531330624919225119674426574742355349194934&quot;
       &quot;96983520312774506326239578318016984801869478851843&quot;
       &quot;85861560789112949495459501737958331952853208805511&quot;
       &quot;12540698747158523863050715693290963295227443043557&quot;
       &quot;66896648950445244523161731856403098711121722383113&quot;
       &quot;62229893423380308135336276614282806444486645238749&quot;
       &quot;30358907296290491560440772390713810515859307960866&quot;
       &quot;70172427121883998797908792274921901699720888093776&quot;
       &quot;65727333001053367881220235421809751254540594752243&quot;
       &quot;52584907711670556013604839586446706324415722155397&quot;
       &quot;53697817977846174064955149290862569321978468622482&quot;
       &quot;83972241375657056057490261407972968652414535100474&quot;
       &quot;82166370484403199890008895243450658541227588666881&quot;
       &quot;16427171479924442928230863465674813919123162824586&quot;
       &quot;17866458359124566529476545682848912883142607690042&quot;
       &quot;24219022671055626321111109370544217506941658960408&quot;
       &quot;07198403850962455444362981230987879927244284909188&quot;
       &quot;84580156166097919133875499200524063689912560717606&quot;
       &quot;05886116467109405077541002256983155200055935729725&quot;
       &quot;71636269561882670428252483600823257530420752963450&quot;))
</code></pre>

<p>일단 문자열을 만들어 놓으면 다음과 같이 시퀀스로 다룰 수 있다.</p>

<pre class="console">
user=> s
"731671765313306249192251196744265..."
user=> (seq s)
(\7 \3 \1 \6 \7 \1 \7 \6 \5 \3 ...)
</pre>

<p>문자열 시퀀스의 각 요소는 <code>Character</code>이므로 이를 숫자(정수)로 바꿔주는 함수가 필요하다. 이 함수는 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#digit-char-int-">Character#digit</a>를 이용해 간단히 작성할 수 있다.</p>

<pre><code class="language-clojure">(defn to-int [c] (Character/digit c 10))
</code></pre>

<p><code>to-int</code>를 이용하면 다음과 같이 숫자 시퀀스를 얻을 수 있다.</p>

<pre class="console">
user=> (map to-int s)
(7 3 1 6 7 1 7 6 5 3 ...)
</pre>

<p>이제 숫자 시퀀스에서 연속된 숫자 다섯 개씩 불러오면 되는데, <code>partition</code> 함수를 사용하면 쉽게 풀 수 있다. <code>partition</code> 함수는 <code>n</code>개의 아이템을 가지는 리스트의 지연 시퀀스를 리턴하며, <code>step</code>을 지정할 수 있다. 여기서는 <code>step</code>을 1로 지정하면 된다.</p>

<pre class="console">
user=> (partition 5 1 *1)
((7 3 1 6 7) (3 1 6 7 1) (1 6 7 1 7) ...)
</pre>

<p>리스트의 시퀀스를 구했다. 각 리스트는 이어지는 다섯 개의 숫자를 나타낸다. 각 리스트의 요소를 곱한 다음 최대값을 구하면 되므로 다음과 같이 하면 답을 구할 수 있다.</p>

<pre><code class="language-clojure">(defn solve-kr []
  (-&gt;&gt; s
       (map to-int)
       (partition 5 1)
       (map #(apply * %))
       (reduce max)))
</code></pre>

<p>결과는 다음과 같다.</p>

<pre class="console">
p008=> (time (solve-kr))
"Elapsed time: 11.636357 msecs"
40???
</pre>

<h2 id="업데이트">업데이트</h2>

<p>Project Euler 사이트 <a href="https://projecteuler.net/problem=8">[Problem 8]</a>을 보면 문제가 살짝 바뀌어 있다. 처음에는 인접한 다섯 개의 숫자를 곱하는 것이었는데 지금은 13개의 숫자를 곱한 최대값을 구하라고 되어 있다. 그런다고 문제가 어려워지는 것은 아니다. 다섯 개씩 자르던 부분을 13개씩 자르도록 바꿔주기만 하면 된다.</p>

<pre><code class="language-clojure">(defn solve-en []
  (-&gt;&gt; s
       (map to-int)
       (partition 13 1)
       (map #(apply * %))
       (reduce max)))
</code></pre>

<pre class="console">
p008=> (time (solve-en))
"Elapsed time: 8.101594 msecs"
23514???000
</pre>

<h2 id="참고">참고</h2>

<ul>
<li><a href="https://github.com/ntalbs/euler/blob/master/src/p008.clj">프로젝트 오일러 8 풀이 소스 코드</a></li>
</ul>
        </section>
        <footer class="post-footer">
          
          <div class="social button-box">
            
            <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a>
            <a class="twitter-follow-button" href="https://twitter.com/ntalbs" data-show-count="false">Follow @ntalbs</a>
            <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
            
          </div>
          
          <nav id="article-nav">
            
            <a class="article-nav-link-wrap previous" href="//ntalbs.github.io/2015/emacs-removing-blank-lines/" id="article-nav-newer"> Emacs: 빈 줄 지우기</a>
            
            
            <a class="article-nav-link-wrap next" href="//ntalbs.github.io/2015/project-euler-007/" id="article-nav-older"> 프로젝트 오일러 7</a>
            
          </nav>
        </footer>
      </article>
    </main>
    
<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
     var disqus_shortname = 'ntalbs-stuff';
     (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


    <section class="section">
  <div class="container has-text-centered">
    <p></p>
  </div>
</section>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/clojure.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/sql.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-2098194-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script src=//ntalbs.github.io/js/index.js type="text/javascript"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
 MathJax.Hub.Config({
   tex2jax: {
     inlineMath: [['$','$']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
   }
 });
</script>

    <footer class="page-bottom">
  <div class="inner">
    <section class="copyright">© 2008-2018 <a href="/about">ntalbs</a></section>
    <section class="poweredby">Powered by <a class="icon-ghost" href="https://gohugo.io">Hugo</a></section>
  </div>
</footer>

  </body>
</html>
