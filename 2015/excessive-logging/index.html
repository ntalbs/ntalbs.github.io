<!DOCTYPE html><html><head><meta name="google-site-verification" content="U8HPz3to00q8wRxuKaw82QsuVvOzGyPxcWhySSYAjOE"><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>과도한 로깅 | ntalbs&#39; stuff</title><meta name="description" content=""><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="ntalbs' stuff"></head><body class="home-template"><nav class="navbar" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-items">+</button> <a class="navbar-brand" href="/">@ntalbs' stuff</a></div><div class="navbar-items collapsed" id="nav-items"><ul><li><a href="/archives">Archives</a></li><li><a href="/tags">Tags</a></li><li><a href="/about">About</a></li></ul></div></div></nav><div id="progress"><div id="bar"></div><div class="container"><div id="scroll-title">과도한 로깅</div></div></div><header class="site-head"><div class="container"><p class="blog-description">내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p></div></header><main class="container" role="main"><article class="post"><header><p class="post-meta"><time datetime="2015-05-06T23:00:00.000Z" itemprop="datePublished">2015-05-07</time> on <a href="/tags/상념/">상념</a><a href="/tags/Java/">Java</a></p><h1 class="post-title">과도한 로깅</h1></header><section class="post-content"><blockquote class="blockquote-reverse">과유불급(過猶不及)<br>정도를 지나침은 미치지 못함과 같다<br>- 논어(論語) 선진편(先進篇)</blockquote><p>방문자가 매우 많은 사이트에서 애플리케이션을 배포하는 작업은 부담이 크다. 다행히 애플리케이션 서버를 여러 대 두기 때문에 서버 한 대가 잘못되더라도 사이트 전면 장애가 발생하지는 않는다. 새로운 코드를 배포할 때는 항상 서버 한 대에 먼저 배포해 놓고 일정 시간 동안 모니터링 한다. 문제가 없는 경우에는 전체 서버로 배포하고, 로그에 예외나 에러가 표시되면 즉시 롤백한다.<a id="more"></a></p><p>문제는 모니터링을 하는데 로그가 너무 많이 표시된다는 점이다. 콘솔 화면에 에러 메시지와 스택 트레이스가 마구 지나가는데 동료들에게 이게 뭐냐고 물어보면 그냥 무시해도 된단다. 그냥 무시할 거면 로그에 남긴 이유가 무엇인가? 로그를 출력하는 코드를 살펴보면 대부분 <code>try...catch</code>로 예외를 잡아 스택 트레이스와 에러 메시지를 로거에 쏟아내고 끝난다. 로그 메시지가 뭘 전달하려는 것인지 의도를 알 수 없다. 예외 상황을 어떻게 해결하는지 고민한 흔적은 보이지 않는다.</p><p>당장 쓰이지 않더라도 언젠가 문제를 해결할 때 큰 도움이 될 지도 모르니 일단 찍어 놓자? 내 생각에 불필요한 (또는 과도한) 로깅에는 다음과 같은 문제가 있다.</p><ol><li>출력되는 로그 메시지 대부분이 문제 해결에 도움이 되지 않는다.</li><li>출력되는 로그 메시지가 너무 많아 정말 문제가 되는 부분을 찾기가 어렵다.</li></ol><p><strong>로그의 대부분이 잡음이라 의미있는 정보를 찾아내기가 매우 어려워 진다.</strong> 문제를 확인하려면 엄청난 양의 (대부분은 문제와 관련이 없을) 로그를 분석해야 한다. <strong>문제 분석에 도움을 주려던 의도와 달리 오히려 문제 분석을 어렵게 한다는 말이다.</strong> 로깅으로 인한 성능 저하나 코드 가독성 저하, 로그 파일 저장 공간 문제 등은 (물론 중요하지만) 부차적 문제다.</p><p>중요 이벤트나 예외 상황에 대해 로그를 남겨두면 추후 문제를 분석할 때 큰 도움이 될 수 있다. 그러나 로그를 어느 수준으로 남길지, 무엇을 남길지 고민해야 한다. 예외가 발생하면 무조건 스택트레이스를 로그에 남겨야 하는가? 어떤 예외에 대해서는 코드 안에서 해당 예외에 적절히 대처할 수 있다. 이미 예상한 예외 상황이고 이에 대한 대처도 잘 되어 있다면 굳이 로그로 남길 필요가 있을까? 어떤 경우에는 로그를 남기지 않아도 상관 없을 것이다. 어떤 경우에는 간단한 메시지와 함께 해당 예외의 발생을 유발한 입력 값 정도만 로그로 남겨도 될 것이다. 스택 트레이스까지 남겨놓아야 문제를 빨리 파악할 수 있는 경우도 있을 것이다.</p><p>예외가 발생했다고 아무런 고민 없이 무조건 에러 메시지와 스택 트레이스만 찍어대는 수준이라면 별로 도움이 되지 않는다.</p><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul><li><a href="http://blog.codinghorror.com/the-problem-with-logging/" target="_blank" rel="noopener">The Problem With Logging</a><br>이 글에서 제프 앳우드는 과도한 로깅이 오히려 문제를 유발할 수 있음을 지적하면서, 모든 것을 로깅하려 하지 말고 주의 깊게 꼭 필요한 것만 로깅하도록 권고한다.</li></ul><div class="button-box"><a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a> <a class="twitter-follow-button" href="https://twitter.com/ntalbs" data-show-count="false">Follow @ntalbs</a></div></section><footer class="post-footer"><nav id="article-nav"><a href="/2015/project-euler-018/" id="article-nav-newer" class="article-nav-link-wrap"><span class="article-nav-title">프로젝트 오일러 18</span> </a><a href="/2015/stop-using-tail/" id="article-nav-older" class="article-nav-link-wrap"><span class="article-nav-title">tail은 이제 그만</span></a></nav><section id="comment"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></footer></article></main><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><footer class="site-footer"><div class="inner"><section class="copyright">&copy; 2008-2018 <a href="/about">ntalbs</a></section><section class="poweredby">Powered by <a class="icon-ghost" href="http://hexo.io">Hexo</a></section></div></footer><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script type="text/javascript" src="/js/jquery.fitvids.js"></script><script type="text/javascript" src="/js/index.js"></script><script>!function(e,a,t,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=a.createElement(t),o=a.getElementsByTagName(t)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(s,o)}(window,document,"script",0,"ga"),ga("create","UA-2098194-3","auto"),ga("require","displayfeatures"),ga("send","pageview")</script><script type="text/javascript">var disqus_shortname="ntalbs-stuff";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config("");</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });</script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>