<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JavaScript 코드 안 HTML 문자열 @ntalbs&#39; stuff</title>
<link rel="shortcut icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/style.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">


  </head>
  <body>
    <div id="progress">
  <div id="bar"></div>
  <div class="container">
    <div id="scroll-title">JavaScript 코드 안 HTML 문자열</div>
  </div>
</div>

    <nav class="navbar" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-items">+</button>
      <a class="navbar-brand" href="/">@ntalbs&#39; stuff</a>
    </div>
    <div class="navbar-items collapsed" id="nav-items">
      <ul>
        
        <li><a href="/archive/">Archive</a></li>
        
        <li><a href="/tags/">Tags</a></li>
        
        <li><a href="/about/">About</a></li>
        
      </ul>
    </div>
  </div>
</nav>

<header class="page-head">
  <div class="container">
    <p class="blog-description">내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p>
  </div>
</header>

    <main class="container" role="main">
      <article class="post">
        <header>
          <p class="post-meta">
            <time datetime="2014-08-22" itemprop="datePublished">2014-08-22</time>
            on
            
            <a href="/tags/javascript/">JavaScript</a>
            
          </p>
          <h1 class="post-title">
            JavaScript 코드 안 HTML 문자열
          </h1>
        </header>
        <section class="post-content">
          <p>JavaScript 코드에 HTML 문자열을 써야 하는 경우가 종종 있다. 문자열이 짧을 때는 그냥 한 줄로 써도 크게 상관 없다. 복잡한 계층 구조를 가지는 긴 HTML 문자열을 써야 할 경우에는 한 줄로 작성하지 않는다. 작성하기도 어렵고 알아보기도 어렵기 때문이다. 보통 다음과 같이 여러 줄로 문자열을 만들고 <code>+</code>로 연결해 변수에 저장한다.
</p>

<pre><code class="language-js">var html = '&lt;div class=&quot;xxx&quot;&gt;' +
              '&lt;div class=&quot;yyy&quot;&gt;' +
                 '&lt;span class=&quot;zzz&quot;&gt;&lt;/span&gt;' +
              '&lt;/div&gt;' +
           '&lt;/div&gt;';
</code></pre>

<p>들여쓰기도 되어 있어 알아보기가 쉬워졌지만, 나는 이 스타일을 좋아하지 않는다. Emacs에서 자동으로 위와 같이 들여쓰기가 되지 않고 각 행 뒤에 <code>+</code>가 붙어 있는 게 너저분해 보이기 때문이다.</p>

<p>함께 일하는 신입사원이 몇 가지 대안을 제시했다.</p>

<h2 id="1-를-이용한-다중-행-문자열-표현">1. <code>\</code>를 이용한 다중 행 문자열 표현</h2>

<pre><code class="language-js">var html = '&lt;div class=&quot;xxx&quot;&gt; \
              &lt;div class=&quot;yyy&quot;&gt; \
                &lt;span class=&quot;zzz&quot;&gt;&lt;/span&gt; \
              &lt;/div&gt; \
            &lt;/div&gt;';
</code></pre>

<p>매 행마다 <code>'</code>로 감싸지 않아도 되어 나름 간결해지기는 하지만, 이렇게 해도 Emacs에서 자동 들여쓰기가 되지 않는다. 또한 jshint에서 경고 메시지를 표시한다. <code>\</code> 뒤에 실수로 공백을 추가하면 문제가 생길 수 있기 때문에 JavaScript에서 <code>\</code>를 써서 다중행 문자열을 표시하는 것은 좋지 않다고 한다. 파일 저장 시 불필요한 공백 문자를 모두 제거해 저장하도록 하고 있어 특별히 문제될 것은 없겠지만, 나 혼자 작업하는 것도 아니므로 경고를 무시하거나 옵션을 조정하면서까지 사용하고 싶지는 않다.</p>

<h2 id="2-각-행-앞에-공백-추가">2. 각 행 앞에 공백 추가</h2>

<pre><code class="language-js">var html = '&lt;div class=&quot;xxx&quot;&gt;' +
           '  &lt;div class=&quot;yyy&quot;&gt;' +
           '    &lt;span class=&quot;zzz&quot;&gt;&lt;/span&gt;' +
           '  &lt;/div&gt;' +
           '&lt;/div&gt;';
</code></pre>

<p>이렇게 하면 Emacs에서 들여쓰기 문제는 해결된다. 그러나 각 행 뒤에 너저분하게 <code>+</code>가 붙어 있는 문제는 여전하다. 또 다른 문제 하나는 보기 좋게 하려고 문자열에 공백을 추가했는데 실제 DOM에서도 텍스트 노드가 추가된다는 것이다.</p>

<h2 id="3-각-행을-배열에-담기">3. 각 행을 배열에 담기</h2>

<pre><code class="language-js">var html = [
  '&lt;div class=&quot;xxx&quot;&gt;',
  '  &lt;span&gt;Hello&lt;/span&gt;',
  '&lt;/div&gt;'
].join('\n');
</code></pre>

<p>마지막 방법은 각 행을 배열에 저장하고 <code>join()</code>을 이용해 연결하는 것이다. 나는 이 방법이 가장 마음에 들었다. 앞서 언급했던 불필요한 텍스트 노드가 추가되는 문제는 다음과 같이 해결할 수 있다.</p>

<pre><code class="language-js">var html = [
  ...
].map(function (s) { return s.trim(); }).join('');
</code></pre>

<p>이 방법이 <code>+</code>로 문자열을 연결하는 방법과 다른 점이 뭘까? <code>trim()</code>을 적용해 쉽게 불필요한 공백을 제거할 수 있는 것은 분명 장점이지만, 내가 이 방법을 선호하는 강력한 이유로 내세우기에는 조금 부족한 듯 하다. 왜 각 행 뒤에 <code>+</code>가 붙는 것은 싫어하면서 <code>,</code>가 붙는 것은 괜찮은가? 글쎄, 그냥 취향이라고 할 수밖에 없을 듯 하다.</p>

<h2 id="사족">사족</h2>

<ul>
<li>최적화 관점에서 본다면 불필요한 작업(<code>trim</code> 처리)이 추가되므로 비효율적이라 할 수 있다. 문자열이 충분히 크지 않다면 대세에 영향을 미치지 않으리라 기대한다.</li>
<li>JavaScript와 HTML을 별도 파일로 분리하고 Ajax로 HTML을 로딩해 사용하는 방법도 고려할 수 있다. 웹 페이지를 만드는 경우라면 충분히 가능한 대안이지만, 웹 에디터와 같이 라이브러리로 제공할 모듈이라면 이런 방식은 좋아 보이지 않는다.</li>
</ul>
        </section>
        <footer class="post-footer">
          
          <div class="social button-box">
            
            <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a>
            <a class="twitter-follow-button" href="https://twitter.com/ntalbs" data-show-count="false">Follow @ntalbs</a>
            <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
            
          </div>
          
          <nav id="article-nav">
            
            <a class="article-nav-link-wrap previous" href="https://ntalbs.github.io/2014/dba-story-1/" id="article-nav-newer"> 초보 DBA 삽질기 1</a>
            
            
            <a class="article-nav-link-wrap next" href="https://ntalbs.github.io/2014/dystopian-future/" id="article-nav-older"> 개발자의 암울한 미래</a>
            
          </nav>
        </footer>
      </article>
    </main>
    
<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
     var disqus_shortname = 'ntalbs-stuff';
     (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


    <section class="section">
  <div class="container has-text-centered">
    <p></p>
  </div>
</section>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/clojure.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/sql.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-2098194-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script src=https://ntalbs.github.io/js/index.js type="text/javascript"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
 MathJax.Hub.Config({
   tex2jax: {
     inlineMath: [['$','$']],
     displayMath: [['$$','$$']],
     processEscapes: true,
     processEnvironments: true,
     skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
     TeX: { equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "AMSsymbols.js"] }
   }
 });
</script>

    <footer class="page-bottom">
  <div class="inner">
    <section class="copyright">© 2008-2018 <a href="/about">ntalbs</a></section>
    <section class="poweredby">Powered by <a class="icon-ghost" href="https://gohugo.io">Hugo</a></section>
  </div>
</footer>

  </body>
</html>
