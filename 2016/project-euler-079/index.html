<!DOCTYPE html>
<html>
  
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta name="google-site-verification" content="U8HPz3to00q8wRxuKaw82QsuVvOzGyPxcWhySSYAjOE" />
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>프로젝트 오일러 79 | ntalbs&#39; stuff</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="shortcut icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">

  <meta name="generator" content="ntalbs' stuff"><!-- hexo-inject:begin --><!-- hexo-inject:end -->

  
  
  
</head>

  <body class="home-template">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><nav class="navbar" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-items">+</button>
      <a class="navbar-brand" href="/">@ntalbs' stuff</a>
    </div>
    <div class="navbar-items collapsed" id="nav-items">
      <ul>
        
          <li><a href="/archives">Archives</a></li>
        
          <li><a href="/tags">Tags</a></li>
        
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>
  </div>
</nav>

<div id="progress">
  <div id="bar"></div>
  <div class="container">
    <div id="scroll-title">프로젝트 오일러 79</div>
  </div>
</div>

<header class="site-head">
  <div class="container">
    <p class="blog-description">내 이 세상 도처에서 쉴 곳을 찾아보았으나, 마침내 찾아낸, 컴퓨터가 있는 구석방보다 나은 곳은 없더라.</p>
  </div>
</header>



<main class="container" role="main">
  <article class="post">
    <header>
      <p class="post-meta">
        <time datetime="2016-11-27T00:00:00.000Z" itemprop="datePublished">2016-11-27</time>
         on <a href="/tags/Project-Euler/">Project-Euler</a><a href="/tags/Clojure/">Clojure</a>
      </p>
      <h1 class="post-title">프로젝트 오일러 79</h1>
    </header>

    

    <section class="post-content">
      <blockquote>
<p>접속 기록으로부터 비밀번호 알아내기<br>문제 자세히 보기: <a href="http://euler.synap.co.kr/prob_detail.php?id=79" target="_blank" rel="noopener">[국어]</a> <a href="https://projecteuler.net/problem=79" target="_blank" rel="noopener">[영어]</a></p>
</blockquote>
<p>접속 기록 데이터가 많지 않으므로 코드를 아무렇게나 짜도 답을 빠르게 구할 수 있을 것이다. 먼저 다음과 같이 접속 기록을 읽는 코드를 작성한다.</p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">def</span></span> keylog</span><br><span class="line">  (<span class="name"><span class="builtin-name">-&gt;</span></span> (<span class="name"><span class="builtin-name">slurp</span></span> <span class="string">"data/keylog.txt"</span>)</span><br><span class="line">      (<span class="name">clojure.string/split</span> #<span class="string">"\r\n"</span>)</span><br><span class="line">      distinct</span><br><span class="line">      sort))</span><br></pre></td></tr></table></figure>
<p>중복을 제거하면 접속 기록이 서른 세 개밖에 되지 않는다.<br><a id="more"></a></p>
<pre class="console">
p079=> keylog
("129" "160" "162" "168" "180" "289" "290" "316" "318" "319"
 "362" "368" "380" "389" "620" "629" "680" "689" "690" "710"
 "716" "718" "719" "720" "728" "729" "731" "736" "760" "762"
 "769" "790" "890")
p079=> (count keylog)
33
</pre>

<p><a href="https://en.wikipedia.org/wiki/Topological_sorting" target="_blank" rel="noopener">위상 정렬(topological sort)</a>과 같은 거창한 알고리즘을 생각할 수도 있겠지만, 단순 무식한 방법을 사용해 문제를 풀여보려 한다. 접속 기록을 가만히 살펴보면 몇 가지 사실을 알 수 있다.</p>
<ul>
<li><code>7</code>은 항상 맨 앞에만 나오고 중간이나 마지막에 나오는 경우가 없다. 따라서 비밀번호의 맨 앞자리는 <code>7</code>이다.</li>
<li><code>0</code>은 항상 마지막에만 나오고 중간이나 처음에 나오는 경우가 없다. 따라서 비밀번호의 마지막 자리는 <code>0</code>이 되어야 한다.</li>
<li>접속 기록에 <code>4</code>와 <code>5</code>는 나오지 않는다. 따라서 비밀번호에는 <code>4</code>와 <code>5</code>가 포함되지 않는다. (비밀번호에 <code>4</code>나 <code>5</code>가 포함된다면 이 접속 기록으로는 해당 비밀번호를 알아낼 수 없다.)</li>
</ul>
<p>이걸 코드로 어떻게 구할 수 있을까? 여기서 사용할 로직은 이렇다. 첫째 자리 수만 모아 집합 $S_1$을 만들고 다른 자리에 나오는 수를 모아 집합 $S_2$를 만든 다음 집합 $S_1 - S_2$ 구하면 비밀번호의 첫 자리를 구할 수 있다. 첫 자리를 제외한 나머지 수에 대해 이 과정을 반복하면 전체 비밀번호를 구할 수 있을 것이다.</p>
<p>접속 기록은 세 개의 숫자로 되어 있지만, 숫자를 두 개씩 끊어 쌍으로 묶으면 생각하기가 편해진다. 즉, 접속 기록이 <code>[1 2 3]</code>였다면 이를 <code>[1 2]</code>, <code>[2 9]</code>와 같이 수의 쌍으로 표현하는 것이다. <code>keylog</code>를 이와 같은 형식으로 바꾸는 코드는 다음과 같이 작성할 수 있다.</p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">def</span></span> pairs</span><br><span class="line">  (<span class="name"><span class="builtin-name">-&gt;&gt;</span></span> keylog</span><br><span class="line">       (<span class="name"><span class="builtin-name">map</span></span> #(<span class="name">parse-int</span> %))</span><br><span class="line">       (<span class="name"><span class="builtin-name">map</span></span> digits)</span><br><span class="line">       (<span class="name"><span class="builtin-name">mapcat</span></span> #(<span class="name"><span class="builtin-name">partition</span></span> <span class="number">2</span> <span class="number">1</span> %))</span><br><span class="line">       distinct))</span><br></pre></td></tr></table></figure>
<p>차집합은 <code>clojure.set/difference</code>를 이용하면 쉽게 구할 수 있다.</p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">defn</span></span> minus [s1 s2]</span><br><span class="line">  (<span class="name">set/difference</span> s1 s2))</span><br></pre></td></tr></table></figure>
<p>이제 비밀번호를 구하는 함수를 작성할 차례다.</p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">defn</span></span> find-key [ps acc]</span><br><span class="line">  (<span class="name"><span class="builtin-name">let</span></span> [ps (<span class="name"><span class="builtin-name">filter</span></span> #(<span class="name"><span class="builtin-name">not=</span></span> (<span class="name"><span class="builtin-name">last</span></span> acc) (<span class="name"><span class="builtin-name">first</span></span> %)) ps)]</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">=</span></span> <span class="number">1</span> (<span class="name"><span class="builtin-name">count</span></span> ps))</span><br><span class="line">      (<span class="name"><span class="builtin-name">into</span></span> acc (<span class="name"><span class="builtin-name">first</span></span> ps))</span><br><span class="line">      (<span class="name"><span class="builtin-name">recur</span></span> ps</span><br><span class="line">             (<span class="name"><span class="builtin-name">into</span></span> acc (<span class="name">minus</span> (<span class="name">set</span> (<span class="name"><span class="builtin-name">map</span></span> first ps)) (<span class="name">set</span> (<span class="name"><span class="builtin-name">map</span></span> second ps))))))))</span><br></pre></td></tr></table></figure>
<p>위 함수는 비밀번호를 숫자의 시퀀스로 리턴한다. 다음과 같이 숫자를 모두 모아 문자열로 만들면 비밀번호가 완성된다.</p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">defn</span></span> solve []</span><br><span class="line">  (<span class="name"><span class="builtin-name">apply</span></span> str (<span class="name">find-key</span> pairs [])))</span><br></pre></td></tr></table></figure>
<p>실행 결과는 다음과 같다. 예상대로 빠르게 답을 구한다.</p>
<pre class="console">
p079=> (time (solve))
"Elapsed time: 1.564309 msecs"
"731??890"
</pre>

<p>사실 이 방법에는 한 가지 가정이 들어가 있다. 비밀번호에 동일한 숫자가 반복되지 않는다는 가정. 다행히 접속 기록에 같은 숫자가 반복되는 경우가 없었고, 답으로 구한 비밀번호에서도 동일한 숫자가 반복되지 않았다. 비밀번호에 같은 숫자가 두 번 이상 반복되었다면 위 방법을 사용하지 못할 것이다.</p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a href="https://github.com/ntalbs/euler/blob/master/src/p079.clj" target="_blank" rel="noopener">프로젝트 오일러 79 풀이 소스 코드</a></li>
</ul>

      <div class="button-box">
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a>
        
          <a class="twitter-follow-button" href="https://twitter.com/ntalbs" data-show-count="false">Follow @ntalbs</a>
        
      </div>
    </section>

    <footer class="post-footer">
      
        <nav id="article-nav">
          
            <a href="/2016/project-euler-080/" id="article-nav-newer" class="article-nav-link-wrap">
              <span class="article-nav-title">프로젝트 오일러 80</span>
            </a>
          
          
            <a href="/2016/project-euler-078/" id="article-nav-older" class="article-nav-link-wrap">
              <span class="article-nav-title">프로젝트 오일러 78</span>
            </a>
          
        </nav>
      

      <section id="comment">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </section>
    </footer>
  </article>
</main>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


    <footer class="site-footer">
  
  <div class="inner">
    <section class="copyright">&copy; 2008-2018 <a href="/about">ntalbs</a></section>
    <section class="poweredby">Powered by <a class="icon-ghost" href="http://hexo.io">Hexo</a></section>
  </div>
</footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>


  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-2098194-3', 'auto');
   ga('require', 'displayfeatures');
   ga('send', 'pageview');

  </script>


  <script type="text/javascript">
   var disqus_shortname = 'ntalbs-stuff';

   (function(){
     var dsq = document.createElement('script');
     dsq.type = 'text/javascript';
     dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   }());
  </script>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
